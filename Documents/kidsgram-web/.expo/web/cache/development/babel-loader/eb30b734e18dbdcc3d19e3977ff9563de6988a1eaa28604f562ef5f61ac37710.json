{"ast":null,"code":"import { useEffect } from \"react\";\nimport { useSeeMeQuery } from \"../generated/graphql\";\nimport { handleLogout, isLoggedInVar } from \"../apollo\";\nimport { useApolloClient, useReactiveVar } from \"@apollo/client\";\nvar useLoggedInUser = function useLoggedInUser() {\n  var client = useApolloClient();\n  var isLoggedIn = useReactiveVar(isLoggedInVar);\n  var _useSeeMeQuery = useSeeMeQuery({\n      skip: isLoggedIn === false\n    }),\n    seeMeData = _useSeeMeQuery.data;\n  useEffect(function () {\n    if ((seeMeData == null ? void 0 : seeMeData.seeMe.user) === null) {\n      console.log(\"유효하지 않은 토큰입니다. 로그아웃 처리되었습니다.\");\n      handleLogout();\n    }\n  }, [seeMeData]);\n  return seeMeData == null ? void 0 : seeMeData.seeMe.user;\n};\nexport default useLoggedInUser;","map":{"version":3,"names":["useEffect","useSeeMeQuery","handleLogout","isLoggedInVar","useApolloClient","useReactiveVar","useLoggedInUser","client","isLoggedIn","_useSeeMeQuery","skip","seeMeData","data","seeMe","user","console","log"],"sources":["C:/Users/GGPC/Documents/kidsgram-web/hooks/useLoggedInUser.ts"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport { useSeeMeQuery } from \"../generated/graphql\";\r\nimport { handleLogout, isLoggedInVar } from \"../apollo\";\r\nimport { ApolloClient, useApolloClient, useReactiveVar } from \"@apollo/client\";\r\n\r\nconst useLoggedInUser = () => {\r\n  const client: ApolloClient<object> = useApolloClient();\r\n  const isLoggedIn: boolean = useReactiveVar(isLoggedInVar);\r\n  const { data: seeMeData } = useSeeMeQuery({ skip: isLoggedIn === false });\r\n\r\n  useEffect(() => {\r\n    if (seeMeData?.seeMe.user === null) {\r\n      console.log(\"유효하지 않은 토큰입니다. 로그아웃 처리되었습니다.\");\r\n      handleLogout();\r\n    }\r\n  }, [seeMeData]);\r\n\r\n  return seeMeData?.seeMe.user;\r\n};\r\n\r\nexport default useLoggedInUser;"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,aAAa;AACtB,SAASC,YAAY,EAAEC,aAAa;AACpC,SAAuBC,eAAe,EAAEC,cAAc,QAAQ,gBAAgB;AAE9E,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC5B,IAAMC,MAA4B,GAAGH,eAAe,CAAC,CAAC;EACtD,IAAMI,UAAmB,GAAGH,cAAc,CAACF,aAAa,CAAC;EACzD,IAAAM,cAAA,GAA4BR,aAAa,CAAC;MAAES,IAAI,EAAEF,UAAU,KAAK;IAAM,CAAC,CAAC;IAA3DG,SAAS,GAAAF,cAAA,CAAfG,IAAI;EAEZZ,SAAS,CAAC,YAAM;IACd,IAAI,CAAAW,SAAS,oBAATA,SAAS,CAAEE,KAAK,CAACC,IAAI,MAAK,IAAI,EAAE;MAClCC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;MAC3Cd,YAAY,CAAC,CAAC;IAChB;EACF,CAAC,EAAE,CAACS,SAAS,CAAC,CAAC;EAEf,OAAOA,SAAS,oBAATA,SAAS,CAAEE,KAAK,CAACC,IAAI;AAC9B,CAAC;AAED,eAAeR,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}