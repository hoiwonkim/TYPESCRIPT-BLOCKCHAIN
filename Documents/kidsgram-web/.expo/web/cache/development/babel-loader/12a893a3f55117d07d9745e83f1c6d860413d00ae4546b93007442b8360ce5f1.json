{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport Loading from \"../components/Loading\";\nimport styled from \"styled-components/native\";\nimport CreatedAt from \"../components/CreatedAt\";\nimport CommentItem from \"../components/CommentItem\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { useEffect, useState } from \"react\";\nimport { Separator } from \"../components/shared\";\nimport { useSeeCommentsQuery } from \"../generated/graphql\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar LoadingContainer = styled.View`\n  background-color: ${function (props) {\n  return props.theme.bgColor;\n}};\n  flex: 1;\n  justify-content: center;\n  align-items: center;\n  padding: 20px;\n`;\nvar Container = styled.View`\n  background-color: ${function (props) {\n  return props.theme.bgColor;\n}};\n  flex: 1;\n  justify-content: center;\n  align-items: flex-start;\n  padding: 20px;\n`;\nvar PhotoContainer = styled.View`\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: center;\n`;\nvar Avatar = styled.Image`\n  width: 32px;\n  height: 32px;\n  border-radius: 50px;\n  margin-right: 13px;\n`;\nvar PhotoInfoContainer = styled.View`\n  flex-direction: column;\n`;\nvar PhotoUserContainer = styled.View`\n  flex-direction: row;\n  margin-bottom: 15px;\n`;\nvar PhotoUsername = styled.Text`\n  font-weight: bold;\n  margin-right: 7px;\n`;\nvar PhotoCaption = styled.Text`\n  font-weight: normal;\n`;\nvar FlatListContainer = styled(FlatList)`\n  width: 100%;\n`;\nvar Comments = function Comments(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    refreshing = _useState2[0],\n    setRefreshing = _useState2[1];\n  var _useSeeCommentsQuery = useSeeCommentsQuery({\n      variables: {\n        photoId: route.params.photoId\n      }\n    }),\n    seeCommentsData = _useSeeCommentsQuery.data,\n    seeCommentsLoading = _useSeeCommentsQuery.loading,\n    refetch = _useSeeCommentsQuery.refetch;\n  var handleNavigateToProfileNavigation = function handleNavigateToProfileNavigation() {\n    var _route$params$user, _route$params$user2, _route$params$user3, _route$params$user4, _route$params$user5, _route$params$user6;\n    navigation.navigate(\"StackProfileNavigation\", {\n      id: (_route$params$user = route.params.user) == null ? void 0 : _route$params$user.id,\n      username: (_route$params$user2 = route.params.user) == null ? void 0 : _route$params$user2.username,\n      name: (_route$params$user3 = route.params.user) == null ? void 0 : _route$params$user3.name,\n      avatarUrl: (_route$params$user4 = route.params.user) == null ? void 0 : _route$params$user4.avatarUrl,\n      isFollowing: (_route$params$user5 = route.params.user) == null ? void 0 : _route$params$user5.isFollowing,\n      isMe: (_route$params$user6 = route.params.user) == null ? void 0 : _route$params$user6.isMe\n    });\n  };\n  var onRefresh = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      setRefreshing(true);\n      yield refetch();\n      setRefreshing(false);\n    });\n    return function onRefresh() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var renderItem = function renderItem(_ref3) {\n    var comment = _ref3.item;\n    return _jsx(CommentItem, _objectSpread({}, comment));\n  };\n  useEffect(function () {\n    navigation.setOptions({\n      headerTitle: \"댓글\"\n    });\n  }, []);\n  return _jsx(_Fragment, {\n    children: seeCommentsLoading === true ? _jsx(LoadingContainer, {\n      children: _jsx(Loading, {})\n    }) : _jsxs(Container, {\n      children: [_jsxs(PhotoContainer, {\n        children: [_jsx(TouchableOpacity, {\n          onPress: handleNavigateToProfileNavigation,\n          children: route.params.user.avatarUrl ? _jsx(Avatar, {\n            source: {\n              uri: route.params.user.avatarUrl || \"\"\n            }\n          }) : _jsx(Avatar, {\n            source: require(\"../assets/basic_user.jpeg\")\n          })\n        }), _jsxs(PhotoInfoContainer, {\n          children: [_jsxs(PhotoUserContainer, {\n            children: [_jsx(TouchableOpacity, {\n              onPress: handleNavigateToProfileNavigation,\n              children: _jsx(PhotoUsername, {\n                children: route.params.user.username\n              })\n            }), _jsx(PhotoCaption, {\n              children: route.params.caption.length > 40 ? `${route.params.caption.slice(0, 40)}...` : route.params.caption\n            })]\n          }), _jsx(CreatedAt, {\n            createdAt: route.params.createdAt\n          })]\n        })]\n      }), _jsx(Separator, {}), _jsx(FlatListContainer, {\n        showsVerticalScrollIndicator: false,\n        refreshing: refreshing,\n        onRefresh: onRefresh,\n        data: seeCommentsData == null ? void 0 : seeCommentsData.seeComments.comments,\n        renderItem: renderItem,\n        keyExtractor: function keyExtractor(comment) {\n          return String(comment.id);\n        }\n      })]\n    })\n  });\n};\nexport default Comments;","map":{"version":3,"names":["Loading","styled","CreatedAt","CommentItem","FlatList","useEffect","useState","Separator","useSeeCommentsQuery","TouchableOpacity","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoadingContainer","View","props","theme","bgColor","Container","PhotoContainer","Avatar","Image","PhotoInfoContainer","PhotoUserContainer","PhotoUsername","Text","PhotoCaption","FlatListContainer","Comments","_ref","navigation","route","_useState","_useState2","_slicedToArray","refreshing","setRefreshing","_useSeeCommentsQuery","variables","photoId","params","seeCommentsData","data","seeCommentsLoading","loading","refetch","handleNavigateToProfileNavigation","_route$params$user","_route$params$user2","_route$params$user3","_route$params$user4","_route$params$user5","_route$params$user6","navigate","id","user","username","name","avatarUrl","isFollowing","isMe","onRefresh","_ref2","_asyncToGenerator","apply","arguments","renderItem","_ref3","comment","item","_objectSpread","setOptions","headerTitle","children","onPress","source","uri","require","caption","length","slice","createdAt","showsVerticalScrollIndicator","seeComments","comments","keyExtractor","String"],"sources":["C:/Users/GGPC/Documents/kidsgram-web/screens/Comments.tsx"],"sourcesContent":["import Loading from \"../components/Loading\";\r\nimport styled from \"styled-components/native\";\r\nimport CreatedAt from \"../components/CreatedAt\";\r\nimport CommentItem from \"../components/CommentItem\";\r\nimport { FlatList } from \"react-native\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Separator } from \"../components/shared\";\r\nimport { useSeeCommentsQuery } from \"../generated/graphql\";\r\nimport { RootStackParamList } from \"../shared/shared.types\";\r\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\r\nimport { NativeStackScreenProps } from \"@react-navigation/native-stack\";\r\n\r\ntype CommentsNavigationProps = NativeStackScreenProps<RootStackParamList, \"StackComments\">;\r\n\r\nconst LoadingContainer = styled.View`\r\n  background-color: ${(props) => props.theme.bgColor};\r\n  flex: 1;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 20px;\r\n`;\r\n\r\nconst Container = styled.View`\r\n  background-color: ${(props) => props.theme.bgColor};\r\n  flex: 1;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  padding: 20px;\r\n`;\r\n\r\nconst PhotoContainer = styled.View`\r\n  flex-direction: row;\r\n  align-items: flex-start;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Avatar = styled.Image`\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50px;\r\n  margin-right: 13px;\r\n`;\r\n\r\nconst PhotoInfoContainer = styled.View`\r\n  flex-direction: column;\r\n`;\r\n\r\nconst PhotoUserContainer = styled.View`\r\n  flex-direction: row;\r\n  margin-bottom: 15px;\r\n`;\r\n\r\nconst PhotoUsername = styled.Text`\r\n  font-weight: bold;\r\n  margin-right: 7px;\r\n`;\r\n\r\nconst PhotoCaption = styled.Text`\r\n  font-weight: normal;\r\n`;\r\n\r\nconst FlatListContainer = styled(FlatList)`\r\n  width: 100%;\r\n`;\r\n\r\nconst Comments = ({ navigation, route }: CommentsNavigationProps) => {\r\n  const [refreshing, setRefreshing] = useState<boolean>(false);\r\n  const { data: seeCommentsData, loading: seeCommentsLoading, refetch } = useSeeCommentsQuery({ variables: { photoId: route.params.photoId } });\r\n\r\n  const handleNavigateToProfileNavigation = (): void => {\r\n    navigation.navigate(\"StackProfileNavigation\", {\r\n      id: route.params.user?.id,\r\n      username: route.params.user?.username,\r\n      name: route.params.user?.name,\r\n      avatarUrl: route.params.user?.avatarUrl,\r\n      isFollowing: route.params.user?.isFollowing,\r\n      isMe: route.params.user?.isMe,\r\n    });\r\n  };\r\n\r\n  const onRefresh = async (): Promise<void> => {\r\n    setRefreshing(true);\r\n    await refetch();\r\n    setRefreshing(false);\r\n  };\r\n\r\n  const renderItem = ({ item: comment }: any) => {\r\n    return <CommentItem {...comment} />;\r\n  };\r\n\r\n  useEffect(() => {\r\n    navigation.setOptions({ headerTitle: \"댓글\" });\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {seeCommentsLoading === true ? (\r\n        <LoadingContainer>\r\n          <Loading />\r\n        </LoadingContainer>\r\n      ) : (\r\n        <Container>\r\n          <PhotoContainer>\r\n            <TouchableOpacity onPress={handleNavigateToProfileNavigation}>\r\n              {route.params.user.avatarUrl ? <Avatar source={{ uri: route.params.user.avatarUrl || \"\" }}></Avatar> : <Avatar source={require(\"../assets/basic_user.jpeg\")} />}\r\n            </TouchableOpacity>\r\n            <PhotoInfoContainer>\r\n              <PhotoUserContainer>\r\n                <TouchableOpacity onPress={handleNavigateToProfileNavigation}>\r\n                  <PhotoUsername>{route.params.user.username}</PhotoUsername>\r\n                </TouchableOpacity>\r\n                <PhotoCaption>{route.params.caption.length > 40 ? `${route.params.caption.slice(0, 40)}...` : route.params.caption}</PhotoCaption>\r\n              </PhotoUserContainer>\r\n              <CreatedAt createdAt={route.params.createdAt} />\r\n            </PhotoInfoContainer>\r\n          </PhotoContainer>\r\n          <Separator />\r\n          <FlatListContainer\r\n            showsVerticalScrollIndicator={false}\r\n            refreshing={refreshing}\r\n            onRefresh={onRefresh}\r\n            data={seeCommentsData?.seeComments.comments}\r\n            renderItem={renderItem}\r\n            keyExtractor={(comment: any) => String(comment.id)}\r\n          ></FlatListContainer>\r\n        </Container>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Comments;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}